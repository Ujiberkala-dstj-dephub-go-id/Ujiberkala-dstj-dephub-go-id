{"version":3,"file":"onoffcanvas.js","sources":["cjs/index.js"],"sourcesContent":["/*!\n* onoffcanvas - v2.1.0\n* An offcanvas plugin\n* https://github.com/onokumus/onoffcanvas#readme\n*\n* Made by onokumus <onokumus@gmail.com> (https://github.com/onokumus)\n* Under MIT License\n*/\n'use strict';\n\nvar NAME = \"onoffcanvas\";\nvar EVENT_KEY = \".\" + NAME;\nvar EventName = {\n  HIDE: \"hide\" + EVENT_KEY,\n  SHOW: \"show\" + EVENT_KEY\n};\nvar ClassName = {\n  SHOW: \"is-open\"\n};\nvar Selector = {\n  DATA_TOGGLE: '[data-toggle=\"onoffcanvas\"]'\n};\nvar OcDefault = {\n  createDrawer: true,\n  hideByEsc: true\n};\n\nfunction getSelectorFromElement(element) {\n  var selector = element.getAttribute(\"data-target\");\n\n  if (!selector || selector === \"#\") {\n    selector = element.getAttribute(\"href\") || \"\";\n  }\n\n  try {\n    var $selector = document.querySelectorAll(selector);\n    return $selector.length > 0 ? selector : null;\n  } catch (error) {\n    throw new Error(\"Target Not Found!\");\n  }\n}\nfunction uniqueArr(arr) {\n  var uniqueArray = arr.filter(function (elem, index, self) {\n    return index === self.indexOf(elem);\n  });\n  return uniqueArray;\n}\nfunction selectorArray(arrs) {\n  var divArr = [];\n\n  for (var _iterator = arrs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var element = _ref;\n    var selector = getSelectorFromElement(element);\n    divArr.push(selector);\n  }\n\n  return divArr;\n}\n\n/**\n *\n * @export\n * @class OnoffCanvas\n * @extends {EventEmitter}\n */\n\nvar OnoffCanvas =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Auto init all OnoffCanvas elements\n   *\n   * @static\n   * @param {boolean} [escKey]\n   * @memberof OnoffCanvas\n   */\n  OnoffCanvas.autoinit = function autoinit(options) {\n    if (options === void 0) {\n      options = OcDefault;\n    }\n\n    var ocNodeList = document.querySelectorAll(\"\" + Selector.DATA_TOGGLE);\n    var ocListArr = [].slice.call(ocNodeList);\n    var selectorArr = selectorArray(ocListArr);\n    var newOcArr = uniqueArr(selectorArr);\n\n    for (var _iterator = newOcArr, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var element = _ref;\n      newOnoffCanvas(element, options);\n    }\n  };\n  /**\n   * Creates an instance of OnoffCanvas.\n   *\n   * @constructor\n   * @param {HTMLElement} _element\n   * @param {IOCDefault} [options]\n   * @memberof OnoffCanvas\n   */\n\n\n  function OnoffCanvas(element, options) {\n    var _this = this;\n\n    this.element = typeof element === \"string\" ? document.querySelector(element) : element;\n    this.config = Object.assign({}, OcDefault, options);\n    this.triggerElements = document.querySelectorAll(Selector.DATA_TOGGLE + \"[href=\\\"#\" + this.element.id + \"\\\"],\\n      \" + Selector.DATA_TOGGLE + \"[data-target=\\\"#\" + this.element.id + \"\\\"]\");\n    this.addAriaExpanded(this.triggerElements);\n    var triggers = [].slice.call(this.triggerElements);\n\n    for (var _iterator2 = triggers, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var trigger = _ref2;\n      trigger.addEventListener(\"click\", function (event) {\n        if (event.currentTarget.tagName === \"A\") {\n          event.preventDefault();\n        }\n\n        _this.toggle();\n      });\n    }\n\n    this.drawer = document.createElement(\"div\");\n    this.drawer.classList.add(\"onoffcanvas-drawer\");\n  }\n\n  var _proto = OnoffCanvas.prototype;\n\n  _proto.listen = function listen(event, handle) {\n    this.element.addEventListener(event, handle, false);\n    return this;\n  };\n\n  _proto.emit = function emit(evtType, target, shouldBubble) {\n    if (shouldBubble === void 0) {\n      shouldBubble = false;\n    }\n\n    var evt;\n\n    if (typeof CustomEvent === \"function\") {\n      evt = new CustomEvent(evtType, {\n        bubbles: shouldBubble\n      });\n    } else {\n      evt = document.createEvent(\"CustomEvent\");\n      evt.initCustomEvent(evtType, shouldBubble, false);\n    }\n\n    this.element.dispatchEvent(evt);\n    return this;\n  };\n\n  _proto.on = function on(event, handle) {\n    this.listen(event, handle);\n    return this;\n  };\n  /**\n   * Show/Hide OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.toggle = function toggle() {\n    if (this.element.classList.contains(ClassName.SHOW)) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n  /**\n   * Show OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.show = function show() {\n    var _this2 = this;\n\n    if (this.element.classList.contains(ClassName.SHOW)) {\n      return;\n    }\n\n    this.element.classList.add(ClassName.SHOW);\n    this.addAriaExpanded(this.triggerElements);\n    this.emit(EventName.SHOW, this.element);\n\n    if (this.config.createDrawer) {\n      this.drawer.classList.add(\"is-open\");\n      this.drawer.addEventListener(\"click\", this.hide.bind(this));\n      document.documentElement.appendChild(this.drawer);\n    }\n\n    if (this.config.hideByEsc) {\n      window.addEventListener(\"keydown\", function (event) {\n        if (event.keyCode === 27) {\n          _this2.hide();\n        }\n      });\n    }\n  };\n  /**\n   * Hide OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.hide = function hide() {\n    if (!this.element.classList.contains(ClassName.SHOW)) {\n      return;\n    }\n\n    if (this.config.createDrawer) {\n      this.drawer.classList.remove(\"is-open\");\n      this.drawer.removeEventListener(\"click\", this.hide.bind(this));\n      this.drawer.parentNode.removeChild(this.drawer);\n    }\n\n    this.element.classList.remove(ClassName.SHOW);\n    this.addAriaExpanded(this.triggerElements);\n    this.emit(EventName.HIDE, this.element);\n  };\n\n  _proto.addAriaExpanded = function addAriaExpanded(triggerElements) {\n    var isOpen = this.element.classList.contains(ClassName.SHOW);\n    Array.prototype.forEach.call(triggerElements, function (el, i) {\n      el.setAttribute(\"aria-expanded\", isOpen ? \"true\" : \"false\");\n    });\n  };\n\n  return OnoffCanvas;\n}();\n\nfunction newOnoffCanvas(element, options) {\n  var newOnoffcanvas = new OnoffCanvas(document.querySelector(element), options);\n}\n\nmodule.exports = OnoffCanvas;\n"],"names":["NAME","EVENT_KEY","EventName","ClassName","Selector","OcDefault","getSelectorFromElement","element","selector","getAttribute","$selector","document","querySelectorAll","length","error","Error","uniqueArr","arr","uniqueArray","filter","elem","index","self","indexOf","selectorArray","arrs","divArr","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","value","push","OnoffCanvas","autoinit","options","ocNodeList","DATA_TOGGLE","ocListArr","slice","call","selectorArr","newOcArr","_this","querySelector","config","Object","assign","triggerElements","id","addAriaExpanded","triggers","_iterator2","_isArray2","_i2","_ref2","trigger","addEventListener","event","currentTarget","tagName","preventDefault","toggle","drawer","createElement","classList","add","_proto","prototype","listen","handle","emit","evtType","target","shouldBubble","evt","CustomEvent","createEvent","initCustomEvent","dispatchEvent","on","contains","SHOW","hide","show","_this2","createDrawer","bind","documentElement","appendChild","hideByEsc","keyCode","remove","removeEventListener","parentNode","removeChild","HIDE","isOpen","forEach","el","i","setAttribute","newOnoffCanvas","newOnoffcanvas","module"],"mappings":"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"}