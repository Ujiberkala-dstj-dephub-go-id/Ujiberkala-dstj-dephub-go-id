{"version":3,"file":"onoffcanvas.js","sources":["cjs/index.js"],"sourcesContent":["/*!\n* onoffcanvas - v2.2.1\n* An offcanvas plugin\n* https://github.com/onokumus/onoffcanvas#readme\n*\n* Made by onokumus <onokumus@gmail.com> (https://github.com/onokumus)\n* Under MIT License\n*/\n'use strict';\n\nvar NAME = \"onoffcanvas\";\nvar EVENT_KEY = \".\" + NAME;\nvar EventName = {\n  HIDE: \"hide\" + EVENT_KEY,\n  SHOW: \"show\" + EVENT_KEY\n};\nvar ClassName = {\n  SHOW: \"is-open\"\n};\nvar Selector = {\n  DATA_TOGGLE: '[data-toggle=\"onoffcanvas\"]'\n};\nvar OcDefault = {\n  createDrawer: true,\n  hideByEsc: true\n};\n\nfunction getSelectorFromElement(element) {\n  var selector = element.getAttribute(\"data-target\");\n\n  if (!selector || selector === \"#\") {\n    selector = element.getAttribute(\"href\") || \"\";\n  }\n\n  try {\n    var $selector = document.querySelectorAll(selector);\n    return $selector.length > 0 ? selector : null;\n  } catch (error) {\n    throw new Error(\"Target Not Found!\");\n  }\n}\nfunction uniqueArr(arr) {\n  var uniqueArray = arr.filter(function (elem, index, self) {\n    return index === self.indexOf(elem);\n  });\n  return uniqueArray;\n}\nfunction selectorArray(arrs) {\n  var divArr = [];\n\n  for (var _iterator = arrs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var element = _ref;\n    var selector = getSelectorFromElement(element);\n    divArr.push(selector);\n  }\n\n  return divArr;\n}\n\n/**\n *\n * @export\n * @class OnoffCanvas\n * @extends {EventEmitter}\n */\n\nvar OnoffCanvas =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Auto init all OnoffCanvas elements\n   *\n   * @static\n   * @param {boolean} [escKey]\n   * @memberof OnoffCanvas\n   */\n  OnoffCanvas.autoinit = function autoinit(options) {\n    if (options === void 0) {\n      options = OcDefault;\n    }\n\n    var ocNodeList = document.querySelectorAll(\"\" + Selector.DATA_TOGGLE);\n    var ocListArr = [].slice.call(ocNodeList);\n    var selectorArr = selectorArray(ocListArr);\n    var newOcArr = uniqueArr(selectorArr);\n\n    for (var _iterator = newOcArr, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var element = _ref;\n      newOnoffCanvas(element, options);\n    }\n  };\n  /**\n   * Creates an instance of OnoffCanvas.\n   *\n   * @constructor\n   * @param {HTMLElement} _element\n   * @param {IOCDefault} [options]\n   * @memberof OnoffCanvas\n   */\n\n\n  function OnoffCanvas(element, options) {\n    var _this = this;\n\n    this.element = typeof element === \"string\" ? document.querySelector(element) : element;\n    this.config = Object.assign({}, OcDefault, options);\n    this.triggerElements = document.querySelectorAll(Selector.DATA_TOGGLE + \"[href=\\\"#\" + this.element.id + \"\\\"],\\n      \" + Selector.DATA_TOGGLE + \"[data-target=\\\"#\" + this.element.id + \"\\\"]\");\n    this.addAriaExpanded(this.triggerElements);\n    var triggers = [].slice.call(this.triggerElements);\n\n    for (var _iterator2 = triggers, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var trigger = _ref2;\n      trigger.addEventListener(\"click\", function (event) {\n        if (event.currentTarget.tagName === \"A\") {\n          event.preventDefault();\n        }\n\n        _this.toggle();\n      });\n    }\n\n    this.drawer = document.createElement(\"div\");\n    this.drawer.classList.add(\"onoffcanvas-drawer\");\n    document.documentElement.appendChild(this.drawer);\n  }\n\n  var _proto = OnoffCanvas.prototype;\n\n  _proto.listen = function listen(event, handle) {\n    this.element.addEventListener(event, handle, false);\n    return this;\n  };\n\n  _proto.emit = function emit(evtType, target, shouldBubble) {\n    if (shouldBubble === void 0) {\n      shouldBubble = false;\n    }\n\n    var evt;\n\n    if (typeof CustomEvent === \"function\") {\n      evt = new CustomEvent(evtType, {\n        bubbles: shouldBubble\n      });\n    } else {\n      evt = document.createEvent(\"CustomEvent\");\n      evt.initCustomEvent(evtType, shouldBubble, false);\n    }\n\n    this.element.dispatchEvent(evt);\n    return this;\n  };\n\n  _proto.on = function on(event, handle) {\n    this.listen(event, handle);\n    return this;\n  };\n  /**\n   * Show/Hide OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.toggle = function toggle() {\n    if (this.element.classList.contains(ClassName.SHOW)) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n  /**\n   * Show OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.show = function show() {\n    var _this2 = this;\n\n    if (this.element.classList.contains(ClassName.SHOW)) {\n      return;\n    }\n\n    this.element.classList.add(ClassName.SHOW);\n    this.addAriaExpanded(this.triggerElements);\n    this.emit(EventName.SHOW, this.element);\n\n    if (this.config.createDrawer) {\n      this.drawer.classList.add(\"is-open\");\n      this.drawer.addEventListener(\"click\", this.hide.bind(this));\n    }\n\n    if (this.config.hideByEsc) {\n      window.addEventListener(\"keydown\", function (event) {\n        if (event.keyCode === 27) {\n          _this2.hide();\n        }\n      });\n    }\n  };\n  /**\n   * Hide OnoffCanvas element\n   *\n   * @returns {void}\n   * @memberof OnoffCanvas\n   */\n\n\n  _proto.hide = function hide() {\n    if (!this.element.classList.contains(ClassName.SHOW)) {\n      return;\n    }\n\n    if (this.config.createDrawer) {\n      this.drawer.classList.remove(\"is-open\");\n      this.drawer.removeEventListener(\"click\", this.hide.bind(this));\n    }\n\n    this.element.classList.remove(ClassName.SHOW);\n    this.addAriaExpanded(this.triggerElements);\n    this.emit(EventName.HIDE, this.element);\n  };\n\n  _proto.addAriaExpanded = function addAriaExpanded(triggerElements) {\n    var isOpen = this.element.classList.contains(ClassName.SHOW);\n    Array.prototype.forEach.call(triggerElements, function (el, i) {\n      el.setAttribute(\"aria-expanded\", isOpen ? \"true\" : \"false\");\n    });\n  };\n\n  return OnoffCanvas;\n}();\n\nfunction newOnoffCanvas(element, options) {\n  var newOnoffcanvas = new OnoffCanvas(document.querySelector(element), options);\n}\n\nmodule.exports = OnoffCanvas;\n"],"names":["NAME","EVENT_KEY","EventName","HIDE","SHOW","ClassName","Selector","DATA_TOGGLE","OcDefault","createDrawer","hideByEsc","getSelectorFromElement","element","selector","getAttribute","$selector","document","querySelectorAll","length","error","Error","uniqueArr","arr","uniqueArray","filter","elem","index","self","indexOf","selectorArray","arrs","divArr","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","next","done","value","push","OnoffCanvas","autoinit","options","ocNodeList","ocListArr","slice","call","selectorArr","newOcArr","newOnoffCanvas","_this","querySelector","config","Object","assign","triggerElements","id","addAriaExpanded","triggers","_iterator2","_isArray2","_i2","_ref2","trigger","addEventListener","event","currentTarget","tagName","preventDefault","toggle","drawer","createElement","classList","add","documentElement","appendChild","_proto","prototype","listen","handle","emit","evtType","target","shouldBubble","evt","CustomEvent","bubbles","createEvent","initCustomEvent","dispatchEvent","on","contains","hide","show","_this2","bind","window","keyCode","remove","removeEventListener","isOpen","forEach","el","i","setAttribute","newOnoffcanvas","module"],"mappings":"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"}